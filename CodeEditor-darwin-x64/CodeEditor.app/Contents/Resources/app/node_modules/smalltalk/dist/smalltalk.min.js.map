{"version":3,"sources":["file://smalltalk/smalltalk.min.js","file://smalltalk/webpack/bootstrap 8a153249a62c0c56573a","file://smalltalk/external \"es6-promise\"","file://smalltalk/lib/smalltalk.js","file://smalltalk/node_modules/currify/legacy/index.js","file://smalltalk/node_modules/currify/legacy/lib/currify.js","file://smalltalk/node_modules/fullstore/legacy/index.js","file://smalltalk/node_modules/fullstore/legacy/lib/fullstore.js"],"names":["smalltalk","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","es6","promise","getType","arguments","length","undefined","type","getTemplate","title","msg","value","buttons","replace","map","toLowerCase","join","showDialog","options","ok","store","cancel","dialog","document","createElement","closeButtons","Promise","resolve","reject","noCancel","empty","tmpl","innerHTML","className","body","appendChild","find","forEach","el","focus","setSelectionRange","addListenerAll","event","closeDialog","target","addEventListener","keyDown","keyDown_","KEY","ENTER","ESC","TAB","LEFT","UP","RIGHT","DOWN","keyCode","namesAll","names","getDataName","preventDefault","remove","shiftKey","tab","filter","toUpperCase","changeButtonFocus","stopPropagation","getAttribute","active","activeElement","activeName","isButton","test","count","activeIndex","indexOf","getIndex","reduce","element","notEmpty","a","querySelector","parent","elements","fn","removeEl","parentElement","removeChild","window","currify","_len","args","Array","_key","BUTTON_OK","BUTTON_OK_CANCEL","alert","prompt","valueStr","String","confirm","index","check","Error","f","apply","b","e","again","concat","slice","data"],"mappings":"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","file":"smalltalk.min.js","sourcesContent":["var smalltalk =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!******************************!*\\\n  !*** external \"es6-promise\" ***!\n  \\******************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports) {\n\nmodule.exports = es6-promise;\n\n/***/ }),\n/* 1 */\n/*!**************************!*\\\n  !*** ./lib/smalltalk.js ***!\n  \\**************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nwindow.Promise = window.Promise || __webpack_require__(/*! es6-promise */ 0);\n\nvar currify = __webpack_require__(/*! currify/legacy */ 2);\nvar store = __webpack_require__(/*! fullstore/legacy */ 4);\nvar keyDown = currify(keyDown_);\n\nvar remove = bind(removeEl, '.smalltalk');\n\nvar BUTTON_OK = ['OK'];\nvar BUTTON_OK_CANCEL = ['OK', 'Cancel'];\n\nexports.alert = function (title, msg) {\n    return showDialog(title, msg, '', BUTTON_OK, { cancel: false });\n};\n\nexports.prompt = function (title, msg) {\n    var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n    var options = arguments[3];\n\n    var type = getType(options);\n\n    var val = String(value).replace(/\"/g, '&quot;');\n\n    var valueStr = '<input type=\"' + type + '\" value=\"' + val + '\" data-name=\"js-input\">';\n\n    return showDialog(title, msg, valueStr, BUTTON_OK_CANCEL, options);\n};\n\nexports.confirm = function (title, msg, options) {\n    return showDialog(title, msg, '', BUTTON_OK_CANCEL, options);\n};\n\nfunction getType() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var type = options.type;\n\n\n    if (type === 'password') return 'password';\n\n    return 'text';\n}\n\nfunction getTemplate(title, msg, value, buttons) {\n    var encodedMsg = msg.replace(/\\n/g, '<br>');\n\n    return '<div class=\"page\">\\n        <div data-name=\"js-close\" class=\"close-button\"></div>\\n        <header>' + title + '</header>\\n        <div class=\"content-area\">' + encodedMsg + value + '</div>\\n        <div class=\"action-area\">\\n            <div class=\"button-strip\"> ' + buttons.map(function (name, i) {\n        return '<button tabindex=' + i + ' data-name=\"js-' + name.toLowerCase() + '\">' + name + '</button>';\n    }).join('') + '\\n            </div>\\n        </div>\\n    </div>';\n}\n\nfunction showDialog(title, msg, value, buttons, options) {\n    var ok = store();\n    var cancel = store();\n\n    var dialog = document.createElement('div');\n    var closeButtons = ['cancel', 'close', 'ok'];\n\n    var promise = new Promise(function (resolve, reject) {\n        var noCancel = options && !options.cancel;\n        var empty = function empty() {};\n\n        ok(resolve);\n        cancel(noCancel ? empty : reject);\n    });\n\n    var tmpl = getTemplate(title, msg, value, buttons);\n\n    dialog.innerHTML = tmpl;\n    dialog.className = 'smalltalk';\n\n    document.body.appendChild(dialog);\n\n    find(dialog, ['ok', 'input']).forEach(function (el) {\n        return el.focus();\n    });\n\n    find(dialog, ['input']).forEach(function (el) {\n        el.setSelectionRange(0, value.length);\n    });\n\n    addListenerAll('click', dialog, closeButtons, function (event) {\n        return closeDialog(event.target, dialog, ok(), cancel());\n    });\n\n    ['click', 'contextmenu'].forEach(function (event) {\n        return dialog.addEventListener(event, function () {\n            return find(dialog, ['ok', 'input']).forEach(function (el) {\n                return el.focus();\n            });\n        });\n    });\n\n    dialog.addEventListener('keydown', keyDown(dialog, ok(), cancel()));\n\n    return promise;\n}\n\nfunction keyDown_(dialog, ok, cancel, event) {\n    var KEY = {\n        ENTER: 13,\n        ESC: 27,\n        TAB: 9,\n        LEFT: 37,\n        UP: 38,\n        RIGHT: 39,\n        DOWN: 40\n    };\n\n    var keyCode = event.keyCode;\n    var el = event.target;\n\n    var namesAll = ['ok', 'cancel', 'input'];\n    var names = find(dialog, namesAll).map(getDataName);\n\n    switch (keyCode) {\n        case KEY.ENTER:\n            closeDialog(el, dialog, ok, cancel);\n            event.preventDefault();\n            break;\n\n        case KEY.ESC:\n            remove();\n            cancel();\n            break;\n\n        case KEY.TAB:\n            if (event.shiftKey) tab(dialog, names);\n\n            tab(dialog, names);\n            event.preventDefault();\n            break;\n\n        default:\n            ['left', 'right', 'up', 'down'].filter(function (name) {\n                return keyCode === KEY[name.toUpperCase()];\n            }).forEach(function () {\n                changeButtonFocus(dialog, names);\n            });\n\n            break;\n    }\n\n    event.stopPropagation();\n}\n\nfunction getDataName(el) {\n    return el.getAttribute('data-name').replace('js-', '');\n}\n\nfunction changeButtonFocus(dialog, names) {\n    var active = document.activeElement;\n    var activeName = getDataName(active);\n    var isButton = /ok|cancel/.test(activeName);\n    var count = names.length - 1;\n    var getName = function getName(activeName) {\n        if (activeName === 'cancel') return 'ok';\n\n        return 'cancel';\n    };\n\n    if (activeName === 'input' || !count || !isButton) return;\n\n    var name = getName(activeName);\n\n    find(dialog, [name]).forEach(function (el) {\n        el.focus();\n    });\n}\n\nvar getIndex = function getIndex(count, index) {\n    if (index === count) return 0;\n\n    return index + 1;\n};\n\nfunction tab(dialog, names) {\n    var active = document.activeElement;\n    var activeName = getDataName(active);\n    var count = names.length - 1;\n\n    var activeIndex = names.indexOf(activeName);\n    var index = getIndex(count, activeIndex);\n\n    var name = names[index];\n\n    find(dialog, [name]).forEach(function (el) {\n        return el.focus();\n    });\n}\n\nfunction closeDialog(el, dialog, ok, cancel) {\n    var name = el.getAttribute('data-name').replace('js-', '');\n\n    if (/close|cancel/.test(name)) {\n        cancel();\n        remove();\n        return;\n    }\n\n    var value = find(dialog, ['input']).reduce(function (value, el) {\n        return el.value;\n    }, null);\n\n    ok(value);\n    remove();\n}\n\nfunction find(element, names) {\n    var notEmpty = function notEmpty(a) {\n        return a;\n    };\n    var elements = names.map(function (name) {\n        return element.querySelector('[data-name=\"js-' + name + '\"]');\n    }).filter(notEmpty);\n\n    return elements;\n}\n\nfunction addListenerAll(event, parent, elements, fn) {\n    find(parent, elements).forEach(function (el) {\n        return el.addEventListener(event, fn);\n    });\n}\n\nfunction removeEl(name) {\n    var el = document.querySelector(name);\n\n    el.parentElement.removeChild(el);\n}\n\nfunction bind(fn) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n    }\n\n    return function () {\n        return fn.apply(undefined, args);\n    };\n}\n\n/***/ }),\n/* 2 */\n/*!**********************************************!*\\\n  !*** ./node_modules/currify/legacy/index.js ***!\n  \\**********************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! ./lib/currify */ 3);\n\n\n/***/ }),\n/* 3 */\n/*!****************************************************!*\\\n  !*** ./node_modules/currify/legacy/lib/currify.js ***!\n  \\****************************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar f = function f(fn) {\n    return [\n    /*eslint no-unused-vars: 0*/\n    function (a) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c, d) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c, d, e) {\n        return fn.apply(undefined, arguments);\n    }];\n};\n\nmodule.exports = function currify(fn) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n    }\n\n    check(fn);\n\n    if (args.length >= fn.length) return fn.apply(undefined, args);\n\n    var again = function again() {\n        return currify.apply(undefined, [fn].concat(args, Array.prototype.slice.call(arguments)));\n    };\n\n    var count = fn.length - args.length - 1;\n    var func = f(again)[count];\n\n    return func || again;\n};\n\nfunction check(fn) {\n    if (typeof fn !== 'function') throw Error('fn should be function!');\n}\n\n/***/ }),\n/* 4 */\n/*!************************************************!*\\\n  !*** ./node_modules/fullstore/legacy/index.js ***!\n  \\************************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! ./lib/fullstore */ 5);\n\n\n/***/ }),\n/* 5 */\n/*!********************************************************!*\\\n  !*** ./node_modules/fullstore/legacy/lib/fullstore.js ***!\n  \\********************************************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function (value) {\n    var data = {\n        value: value\n    };\n\n    return function (value) {\n        if (!arguments.length) return data.value;\n\n        data.value = value;\n\n        return value;\n    };\n};\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// smalltalk.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8a153249a62c0c56573a","module.exports = es6-promise;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-promise\"\n// module id = 0\n// module chunks = 0 1","'use strict';\n\nwindow.Promise = window.Promise || require('es6-promise');\n\nconst currify = require('currify/legacy');\nconst store = require('fullstore/legacy');\nconst keyDown = currify(keyDown_);\n\nconst remove = bind(removeEl, '.smalltalk');\n\nconst BUTTON_OK = ['OK'];\nconst BUTTON_OK_CANCEL = ['OK', 'Cancel'];\n\nexports.alert = (title, msg) => {\n    return showDialog(title, msg, '', BUTTON_OK, {cancel: false});\n};\n\nexports.prompt = (title, msg, value = '', options) => {\n    const type = getType(options);\n    \n    const val = String(value)\n        .replace(/\"/g, '&quot;');\n    \n    const valueStr = `<input type=\"${ type }\" value=\"${ val }\" data-name=\"js-input\">`;\n    \n    return showDialog(title, msg, valueStr, BUTTON_OK_CANCEL, options);\n};\n\nexports.confirm = (title, msg, options) => {\n    return showDialog(title, msg, '', BUTTON_OK_CANCEL, options);\n};\n\nfunction getType(options = {}) {\n    const {type} = options;\n    \n    if (type === 'password')\n        return 'password';\n    \n    return 'text';\n}\n\nfunction getTemplate(title, msg, value, buttons) {\n    const encodedMsg = msg.replace(/\\n/g, '<br>');\n    \n    return `<div class=\"page\">\n        <div data-name=\"js-close\" class=\"close-button\"></div>\n        <header>${ title }</header>\n        <div class=\"content-area\">${ encodedMsg }${ value }</div>\n        <div class=\"action-area\">\n            <div class=\"button-strip\"> ${\n                buttons.map((name, i) =>\n                    `<button tabindex=${ i } data-name=\"js-${ name.toLowerCase() }\">${ name }</button>`\n                ).join('')\n            }\n            </div>\n        </div>\n    </div>`;\n}\n\nfunction showDialog(title, msg, value, buttons, options) {\n    const ok = store();\n    const cancel = store();\n    \n    const dialog = document.createElement('div');\n    const closeButtons = [\n        'cancel',\n        'close',\n        'ok'\n    ];\n    \n    const promise = new Promise((resolve, reject) => {\n        const noCancel = options && !options.cancel;\n        const empty = () => {};\n        \n        ok(resolve);\n        cancel(noCancel ? empty : reject);\n    });\n    \n    const tmpl = getTemplate(title, msg, value, buttons);\n    \n    dialog.innerHTML = tmpl;\n    dialog.className = 'smalltalk';\n    \n    document.body.appendChild(dialog);\n    \n    find(dialog, ['ok', 'input']).forEach((el) =>\n        el.focus()\n    );\n    \n    find(dialog, ['input']).forEach((el) => {\n        el.setSelectionRange(0, value.length);\n    });\n    \n    addListenerAll('click', dialog, closeButtons, (event) =>\n        closeDialog(event.target, dialog, ok(), cancel())\n    );\n    \n    ['click', 'contextmenu'].forEach((event) =>\n        dialog.addEventListener(event, () =>\n            find(dialog, ['ok', 'input']).forEach((el) =>\n                el.focus()\n            )\n        )\n    );\n    \n    dialog.addEventListener('keydown', keyDown(dialog, ok(), cancel()));\n    \n    return promise;\n}\n\nfunction keyDown_(dialog, ok, cancel, event) {\n    const KEY   = {\n        ENTER : 13,\n        ESC   : 27,\n        TAB   : 9,\n        LEFT  : 37,\n        UP    : 38,\n        RIGHT : 39,\n        DOWN  : 40\n    };\n    \n    const keyCode = event.keyCode;\n    const el = event.target;\n    \n    const namesAll = ['ok', 'cancel', 'input'];\n    const names = find(dialog, namesAll)\n        .map(getDataName);\n    \n    switch(keyCode) {\n    case KEY.ENTER:\n        closeDialog(el, dialog, ok, cancel);\n        event.preventDefault();\n        break;\n    \n    case KEY.ESC:\n        remove();\n        cancel();\n        break;\n    \n    case KEY.TAB:\n        if (event.shiftKey)\n            tab(dialog, names);\n        \n        tab(dialog, names);\n        event.preventDefault();\n        break;\n    \n    default:\n        ['left', 'right', 'up', 'down'].filter((name) => {\n            return keyCode === KEY[name.toUpperCase()];\n        }).forEach(() => {\n            changeButtonFocus(dialog, names);\n        });\n        \n        break;\n    }\n    \n    event.stopPropagation();\n}\n\nfunction getDataName(el) {\n    return el\n        .getAttribute('data-name')\n        .replace('js-', '');\n}\n\nfunction changeButtonFocus(dialog, names) {\n    const active = document.activeElement;\n    const activeName = getDataName(active);\n    const isButton = /ok|cancel/.test(activeName);\n    const count = names.length - 1;\n    const getName = (activeName) => {\n        if (activeName === 'cancel')\n            return 'ok';\n        \n        return 'cancel';\n    };\n    \n    if (activeName === 'input' || !count || !isButton)\n        return;\n    \n    const name = getName(activeName);\n    \n    find(dialog, [name]).forEach((el) => {\n        el.focus();\n    });\n}\n\nconst getIndex = (count, index) => {\n    if (index === count)\n        return 0;\n    \n    return index + 1;\n};\n\nfunction tab(dialog, names) {\n    const active = document.activeElement;\n    const activeName = getDataName(active);\n    const count = names.length - 1;\n    \n    const activeIndex = names.indexOf(activeName);\n    const index = getIndex(count, activeIndex);\n    \n    const name = names[index];\n    \n    find(dialog, [name]).forEach((el) =>\n        el.focus()\n    );\n}\n\nfunction closeDialog(el, dialog, ok, cancel) {\n    const name = el\n        .getAttribute('data-name')\n        .replace('js-', '');\n    \n    if (/close|cancel/.test(name)) {\n        cancel();\n        remove();\n        return;\n    }\n    \n    const value = find(dialog, ['input'])\n        .reduce((value, el) => el.value, null);\n    \n    ok(value);\n    remove();\n}\n\nfunction find(element, names) {\n    const notEmpty = (a) => a;\n    const elements = names.map((name) =>\n        element.querySelector(`[data-name=\"js-${ name }\"]`)\n    ).filter(notEmpty);\n    \n    return elements;\n}\n\nfunction addListenerAll(event, parent, elements, fn) {\n    find(parent, elements)\n        .forEach((el) =>\n            el.addEventListener(event, fn)\n        );\n}\n\nfunction removeEl(name) {\n     const el = document.querySelector(name);\n     \n     el.parentElement.removeChild(el);\n}\n\nfunction bind(fn, ...args) {\n    return () => fn(...args);\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./lib/smalltalk.js","module.exports = require('./lib/currify');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/currify/legacy/index.js\n// module id = 2\n// module chunks = 0","'use strict';\n\nvar f = function f(fn) {\n    return [\n    /*eslint no-unused-vars: 0*/\n    function (a) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c, d) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c, d, e) {\n        return fn.apply(undefined, arguments);\n    }];\n};\n\nmodule.exports = function currify(fn) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n    }\n\n    check(fn);\n\n    if (args.length >= fn.length) return fn.apply(undefined, args);\n\n    var again = function again() {\n        return currify.apply(undefined, [fn].concat(args, Array.prototype.slice.call(arguments)));\n    };\n\n    var count = fn.length - args.length - 1;\n    var func = f(again)[count];\n\n    return func || again;\n};\n\nfunction check(fn) {\n    if (typeof fn !== 'function') throw Error('fn should be function!');\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/currify/legacy/lib/currify.js\n// module id = 3\n// module chunks = 0","module.exports = require('./lib/fullstore');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fullstore/legacy/index.js\n// module id = 4\n// module chunks = 0","'use strict';\n\nmodule.exports = function (value) {\n    var data = {\n        value: value\n    };\n\n    return function (value) {\n        if (!arguments.length) return data.value;\n\n        data.value = value;\n\n        return value;\n    };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fullstore/legacy/lib/fullstore.js\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}